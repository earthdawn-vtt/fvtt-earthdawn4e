<section class="tab {{tabs.talents.cssClass}}" data-group="sheet" data-tab="talents">
<h3>{{localize "ED.Actor.Header.abilities"}}</h3>
  <div class="container__block">

      {{#if splitTalents}}

        <!-- Discipline Talents -->
        <div class="ability-card__grid--container container__header text-break__auto">
            <div class="ability-card__grid--item"></div>
            <div class="ability-card__grid--item">{{localize "ED.Actor.Header.talentsDiscipline"}}</div>
            <div class="ability-card__grid--item text__alignment--center">{{localize "ED.Actor.Header.action"}}</div>
            <div class="ability-card__grid--item text__alignment--center">{{localize "ED.Actor.Header.rank"}}</div>
            <div class="ability-card__grid--item text__alignment--center">{{localize "ED.Actor.Header.step"}}</div>
            <div class="ability-card__grid--item text__alignment--center">{{localize "ED.Actor.Header.strain"}}</div>
            <div class="ability-card__grid--item ZZ">{{localize "ED.Actor.Header.attribute"}}</div>
            <div class="ability-card__grid--item"></div>
        </div>
        {{#each (ed-getTalentCategory actor.itemTypes.talent "discipline") as |talent i|}}
          {{> "systems/ed4e/templates/actor/cards/ability-card.hbs" }}
          {{#each actor.itemTypes.knackAbility}}
            {{#if (eq this.system.sourceTalent talent.system.edid)}}
              {{> "systems/ed4e/templates/actor/cards/knack-ability-card.hbs"}}
            {{/if}}
          {{/each}}
          {{#each actor.itemTypes.knackManeuver}}
            {{#if (eq this.system.sourceTalent talent.system.edid)}}
              {{> "systems/ed4e/templates/actor/cards/knack-maneuver-card.hbs"}}
            {{/if}}
          {{/each}}
          {{#each actor.itemTypes.knackKarma}}
            {{#if (eq this.system.sourceTalent talent.system.edid)}}
              {{> "systems/ed4e/templates/actor/cards/knack-karma-card.hbs"}}
            {{/if}}
          {{/each}}
        {{/each}}

        <!-- Optional Talents -->
        {{#if (ed-getTalentCategory actor.itemTypes.talent "optional.length")}}
          <div class="ability-card__grid--container container__header text-break__auto">
              <div class="ability-card__grid--item"></div>
              <div class="ability-card__grid--item">{{localize "ED.Actor.Header.talentsOptional"}}</div>
              <div class="ability-card__grid--item text__alignment--center">{{localize "ED.Actor.Header.action"}}</div>
              <div class="ability-card__grid--item text__alignment--center">{{localize "ED.Actor.Header.rank"}}</div>
              <div class="ability-card__grid--item text__alignment--center">{{localize "ED.Actor.Header.step"}}</div>
              <div class="ability-card__grid--item text__alignment--center">{{localize "ED.Actor.Header.strain"}}</div>
              <div class="ability-card__grid--item text__alignment--center">{{localize "ED.Actor.Header.attribute"}}</div>
              <div class="ability-card__grid--item"></div>
          </div>
          {{#each (ed-getTalentCategory actor.itemTypes.talent "optional") as |talent i|}}
            {{> "systems/ed4e/templates/actor/cards/ability-card.hbs" }}
            {{#each actor.itemTypes.knackAbility}}
              {{#if (eq this.system.sourceTalent talent.system.edid)}}
                {{> "systems/ed4e/templates/actor/cards/knack-ability-card.hbs" knack=this talent=talent}}
              {{/if}}
            {{/each}}
            {{#each actor.itemTypes.knackManeuver}}
              {{#if (eq this.system.sourceTalent talent.system.edid)}}
                {{> "systems/ed4e/templates/actor/cards/knack-maneuver-card.hbs"}}
              {{/if}}
            {{/each}}
            {{#each actor.itemTypes.knackKarma}}
              {{#if (eq this.system.sourceTalent talent.system.edid)}}
                {{> "systems/ed4e/templates/actor/cards/knack-karma-card.hbs"}}
              {{/if}}
            {{/each}}
          {{/each}}
        {{/if}}

      <!-- Free/Racial Talents -->
        {{#if (ed-getTalentCategory actor.itemTypes.talent "free.length")}}
          <div class="ability-card__grid--container container__header text-break__auto">
              <div class="ability-card__grid--item"></div>
              <div class="ability-card__grid--item">{{localize "ED.Actor.Header.talentsFreeRacial"}}</div>
              <div class="ability-card__grid--item text__alignment--center">{{localize "ED.Actor.Header.action"}}</div>
              <div class="ability-card__grid--item text__alignment--center">{{localize "ED.Actor.Header.rank"}}</div>
              <div class="ability-card__grid--item text__alignment--center">{{localize "ED.Actor.Header.step"}}</div>
              <div class="ability-card__grid--item text__alignment--center">{{localize "ED.Actor.Header.strain"}}</div>
              <div class="ability-card__grid--item text__alignment--center">{{localize "ED.Actor.Header.attribute"}}</div>
              <div class="ability-card__grid--item"></div>
          </div>
          {{#each (ed-getTalentCategory actor.itemTypes.talent "free") as |talent i|}}
            {{> "systems/ed4e/templates/actor/cards/ability-card.hbs" }}
            {{#each actor.itemTypes.knackAbility}}
              {{#if (eq this.system.sourceTalent talent.system.edid)}}
                {{> "systems/ed4e/templates/actor/cards/knack-ability-card.hbs" knack=this talent=talent}}
              {{/if}}
            {{/each}}
            {{#each actor.itemTypes.knackManeuver}}
              {{#if (eq this.system.sourceTalent talent.system.edid)}}
                {{> "systems/ed4e/templates/actor/cards/knack-maneuver-card.hbs"}}
              {{/if}}
            {{/each}}
            {{#each actor.itemTypes.knackKarma}}
              {{#if (eq this.system.sourceTalent talent.system.edid)}}
                {{> "systems/ed4e/templates/actor/cards/knack-karma-card.hbs"}}
              {{/if}}
            {{/each}}
          {{/each}}
        {{/if}}

          <!-- Versatility Talents -->
        {{#if (ed-getTalentCategory actor.itemTypes.talent "versatility.length")}}
          <div class="ability-card__grid--container container__header text-break__auto">
              <div class="ability-card__grid--item"></div>
              <div class="ability-card__grid--item">{{localize "ED.Actor.Header.talentsVersatility"}}</div>
              <div class="ability-card__grid--item text__alignment--center">{{localize "ED.Actor.Header.action"}}</div>
              <div class="ability-card__grid--item text__alignment--center">{{localize "ED.Actor.Header.rank"}}</div>
              <div class="ability-card__grid--item text__alignment--center">{{localize "ED.Actor.Header.step"}}</div>
              <div class="ability-card__grid--item text__alignment--center">{{localize "ED.Actor.Header.strain"}}</div>
              <div class="ability-card__grid--item text__alignment--center">{{localize "ED.Actor.Header.attribute"}}</div>
              <div class="ability-card__grid--item"></div>
          </div>
          {{#each (ed-getTalentCategory actor.itemTypes.talent "versatility") as |talent i|}}
            {{> "systems/ed4e/templates/actor/cards/ability-card.hbs" }}
            {{#each actor.itemTypes.knackAbility}}
              {{#if (eq this.system.sourceTalent talent.system.edid)}}
                {{> "systems/ed4e/templates/actor/cards/knack-ability-card.hbs" knack=this talent=talent}}
              {{/if}}
            {{/each}}
            {{#each actor.itemTypes.knackManeuver}}
              {{#if (eq this.system.sourceTalent talent.system.edid)}}
                {{> "systems/ed4e/templates/actor/cards/knack-maneuver-card.hbs"}}
              {{/if}}
            {{/each}}
            {{#each actor.itemTypes.knackKarma}}
              {{#if (eq this.system.sourceTalent talent.system.edid)}}
                {{> "systems/ed4e/templates/actor/cards/knack-karma-card.hbs"}}
              {{/if}}
            {{/each}}
          {{/each}}
        {{/if}}

      {{else}}
        {{#each actor.itemTypes.talent}}
          {{> "systems/ed4e/templates/actor/cards/ability-card.hbs" }}
        {{/each}}
      {{/if}}
  </div>
</section>
