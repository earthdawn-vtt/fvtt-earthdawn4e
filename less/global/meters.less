/* ======================= Meters ======================= */
.meter() {
  position: relative;
  overflow: hidden;
  display: flex;
  height: var(--meter-h, 7px);
  background: var(--meter-bg, var(--color-primary-grey-30));
  border-radius: var(--meter-radius, 5px);
}
.meter__segment { height: 100%; flex: 0 0 auto; }
.meter__marker  { position: absolute; top: 0; width: 2px; height: 100%; background-color: var(--color-primary); pointer-events: none; }

/* ======================= Damage meter ======================= */
.damage-bar { .meter(); }
.damage-bar__segment   { .meter__segment; }
.damage-bar__standard  { width: calc(~"min(100%, (var(--d-std, 0)  / max(var(--d-max, 1), 1)) * 100%)"); background: var(--color-danger,  var(--color-meter-4)); }
.damage-bar__stun      { width: calc(~"min(100%, (var(--d-stun, 0) / max(var(--d-max, 1), 1)) * 100%)"); background: var(--color-accent,  var(--color-meter-5)); }
.damage-bar__remainder { flex: 1 1 auto; background: var(--color-primary-grey); }
.damage-bar__marker    { .meter__marker; }
.damage-bar__marker--unconscious { left: calc(~"(var(--u, 0) / max(var(--d-max, 1), 1)) * 100%"); transform: translateX(-50%); }

/* ======================= Encumbrance meter ======================= */
.encumbrance__container {
    margin-top: 0.5rem;
}
.encumbrance__row {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin: 0.6rem 0;
}
.encumbrance__label {
    white-space: nowrap;
    text-transform: uppercase;
    padding-top: 2px;
}
.encumbrance__bar {
    position: relative;
    overflow: hidden;
    flex: 1;
    height: 12px;
    background: var(--color-primary-grey);
}
.encumbrance__fill {
    height: 100%;
    width: var(--fill-width, 0%);
    transition: width 0.3s ease, background-color 0.3s ease;
    background-color: grey;
    &.low { background-color: var(--color-meter-1); }
    &.medium { background-color: var(--color-meter-2); }
    &.high { background-color: var(--color-meter-3); }
    &.over { background-color: var(--color-meter-4); }
}
.encumbrance__marker {
    position: absolute;
    top: 0;
    width: 2px;
    height: 100%;
    background-color: var(--color-primary);
    pointer-events: none;
    &.marker__x { left: 50%; }
    &.marker__x15 { left: 75%; }
}

/* ======================= Wounds meter ======================= */

.wounds-bar {
  .meter();
  width: 100%;
  --meter-h: 8px;
  background: var(--color-meter-background);
}
.wounds-bar-segment { .meter__segment; }
.wounds-bar-taken { width: calc(~"min(100%, max(0%, (var(--w-current, 0) / max(var(--w-max, 1), 1)) * 100%))"); background: var(--color-meter-4); }
.wounds-bar[data-full="1"] {
  .wounds-bar-taken {
    background: var(--color-meter-6);
  }
}

