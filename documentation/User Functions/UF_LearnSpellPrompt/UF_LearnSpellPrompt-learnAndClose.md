This function handles the learning of the spell and closing of the dialog.